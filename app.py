import streamlit as st

st.set_page_config(page_title="‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏°", layout="wide")
st.title("üçΩÔ∏è ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ñ‡∏ß‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏° ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ")

# ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏†‡∏≤‡∏û
restaurants = [
    {
        "name": "‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡πä‡∏≠‡πâ‡∏≠‡∏¢‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á",
        "desc": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏±‡∏ô‡πÉ‡∏à",
        "lat": 14.041,
        "lng": 101.371,
        "category": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á",
        "image": "https://img.wongnai.com/p/1920x0/2020/03/29/138f916c791a4874979af06dd79dbaaf.jpg"
    },
    {
        "name": "‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏≤‡∏¢",
        "desc": "‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô",
        "lat": 14.040,
        "lng": 101.370,
        "category": "‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ô",
        "image": "https://img.wongnai.com/p/1920x0/2021/12/31/9cdc4b16dcf44dc495beca0dcaa79e4a.jpg"
    },
    {
        "name": "‡∏£‡πâ‡∏≤‡∏ô‡∏õ‡∏±‡πà‡∏ô‡πÉ‡∏ô‡∏õ‡πà‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà",
        "desc": "‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÅ‡∏ô‡∏ß‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏£‡πà‡∏°‡∏£‡∏∑‡πà‡∏ô",
        "lat": 14.058,
        "lng": 101.388,
        "category": "‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ",
        "image": "https://10619-2.s.cdn12.com/rests/small/w550/h367/108_510225228.jpg"
    },
    {
        "name": "‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡πÑ‡∏Å‡πà ‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà ‡πÄ‡∏ö‡∏ï‡∏á",
        "desc": "‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ ‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß ‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà",
        "lat": 14.059,
        "lng": 101.389,
        "category": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß",
        "image": "https://img.wongnai.com/p/1920x0/2024/03/04/85fd2de794ce47eea296fe6d28f3ceb9.jpg"
    },
    {
        "name": "Bloom Restaurant @ Siamdasada",
        "desc": "‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ü‡∏¥‡∏ß‡∏ä‡∏±‡πà‡∏ô‡πÉ‡∏ô‡∏£‡∏µ‡∏™‡∏≠‡∏£‡πå‡∏ï‡∏´‡∏£‡∏π ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏î‡∏µ",
        "lat": 14.053,
        "lng": 101.383,
        "category": "‡∏ü‡∏¥‡∏ß‡∏ä‡∏±‡πà‡∏ô",
        "image": "https://img.wongnai.com/p/1920x0/2023/06/20/fe089df9a442415daa69028b6b685516.jpg"
    },
    {
        "name": "‡∏™‡∏ß‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏ô‡∏¥‡∏ô‡∏ô‡πâ‡∏≥",
        "desc": "‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏¥‡∏°‡∏ô‡πâ‡∏≥‡∏ß‡∏¥‡∏ß‡∏™‡∏ß‡∏¢ ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏î‡πá‡∏î‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏∏‡πâ‡∏á‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥‡πÄ‡∏ú‡∏≤",
        "lat": 14.060,
        "lng": 101.390,
        "category": "‡∏ã‡∏µ‡∏ü‡∏π‡πâ‡∏î",
        "image": "https://img.wongnai.com/p/1920x0/2020/06/15/77d89c6091244cae977cd8f93178b770.jpg"
    }
]

# ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏á
search = st.text_input("üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠")
category = st.selectbox("üçΩÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£", ["‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"] + sorted(set(r["category"] for r in restaurants)))

filtered = [r for r in restaurants if search.lower() in r["name"].lower()]
if category != "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":
    filtered = [r for r in filtered if r["category"] == category]

# ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
st.sidebar.header("üì∏ ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£")
uploaded_image = st.sidebar.file_uploader("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û", type=["jpg", "png"])
if uploaded_image:
    st.sidebar.image(uploaded_image, caption="‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î", use_column_width=True)

# ‡πÅ‡∏™‡∏î‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£
for r in filtered:
    st.subheader(r["name"])
    st.write(r["desc"])
    if "image" in r:
        st.image(r["image"], caption=r["name"], use_column_width=True)
    map_url = f"https://maps.google.com/maps?q={r['lat']},{r['lng']}&hl=th&z=16&output=embed"
    st.markdown(f"<iframe src='{map_url}' width='100%' height='200'></iframe>", unsafe_allow_html=True)
    rating = st.slider(f"‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡πâ‡∏≤‡∏ô {r['name']}", 1, 5, 3)
    st.write(f"‚≠ê ‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: {rating}/5")
    comment = st.text_area(f"üí¨ ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô {r['name']}")
    if st.button(f"‡∏™‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏£‡πâ‡∏≤‡∏ô {r['name']}"):
        st.success(f"‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤: {comment}")
    st.markdown("---")

# ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå
st.header("üìù ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ")

with st.form("site_review_form"):
    site_rating = st.slider("‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ", 1, 5, 4)
    site_comment = st.text_area("‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå")
    submitted = st.form_submit_button("‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå")

if submitted:
    st.success("‚úÖ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå!")
    st.markdown(f"‚≠ê ‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ: **{site_rating}/5**")
    st.markdown(f"üí¨ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: _{site_comment}_")
