import streamlit as st

st.set_page_config(page_title="‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏°", layout="wide")
st.title("üçΩÔ∏è ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ñ‡∏ß‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏° ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ")

# ‡∏£‡∏ß‡∏°‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
restaurants = [
    # ‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏¥‡∏°
    {"name": "‡∏Ñ‡∏£‡∏±‡∏ß‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏°", "desc": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏£‡∏™‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏ô", "lat": 14.048, "lng": 101.378, "category": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢"},
    {"name": "‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡πÄ‡∏£‡∏∑‡∏≠‡πÄ‡∏à‡πä‡πÅ‡∏î‡∏á", "desc": "‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô", "lat": 14.049, "lng": 101.379, "category": "‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß"},
    {"name": "‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà‡∏ï‡∏µ‡πã‡∏ô‡πâ‡∏≠‡∏¢", "desc": "‡πÑ‡∏Å‡πà‡∏ô‡∏∏‡πà‡∏° ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡πÄ‡∏î‡πá‡∏î", "lat": 14.047, "lng": 101.377, "category": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß"},
    {"name": "‡∏ï‡∏≥‡πÅ‡∏ã‡πà‡∏ö‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏°", "desc": "‡∏™‡πâ‡∏°‡∏ï‡∏≥‡∏£‡∏™‡∏à‡∏±‡∏î", "lat": 14.046, "lng": 101.376, "category": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏µ‡∏™‡∏≤‡∏ô"},
    {"name": "‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡πÅ‡∏ü‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏°‡πâ", "desc": "‡∏Å‡∏≤‡πÅ‡∏ü‡∏™‡∏î ‡∏Ç‡∏ô‡∏°‡πÇ‡∏Æ‡∏°‡πÄ‡∏°‡∏î", "lat": 14.045, "lng": 101.375, "category": "‡∏Å‡∏≤‡πÅ‡∏ü"},
    {"name": "‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡∏£‡∏¥‡∏°‡∏ó‡∏≤‡∏á", "desc": "‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡∏£‡πâ‡∏≠‡∏ô‡πÜ", "lat": 14.044, "lng": 101.374, "category": "‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏∞‡∏ó‡∏∞"},
    {"name": "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ï‡πâ‡∏°‡πÇ‡∏ï‡πâ‡∏£‡∏∏‡πà‡∏á", "desc": "‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡∏∂‡∏Å ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢", "lat": 14.043, "lng": 101.373, "category": "‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡∏∂‡∏Å"},
    {"name": "‡∏ä‡∏≤‡∏ö‡∏π‡∏ä‡∏¥‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏°", "desc": "‡∏ä‡∏≤‡∏ö‡∏π‡∏ö‡∏∏‡∏ü‡πÄ‡∏ü‡πà‡∏ï‡πå", "lat": 14.042, "lng": 101.372, "category": "‡∏ä‡∏≤‡∏ö‡∏π"},
    {"name": "‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡πä‡∏≠‡πâ‡∏≠‡∏¢‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á", "desc": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏±‡∏ô‡πÉ‡∏à", "lat": 14.041, "lng": 101.371, "category": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á"},
    {"name": "‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏≤‡∏¢", "desc": "‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô", "lat": 14.040, "lng": 101.370, "category": "‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ô"},

    # ‡∏£‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏ñ‡∏ß‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏°
    {"name": "Noen Homme Cafe", "desc": "‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡πÅ‡∏ü‡∏ö‡πâ‡∏≤‡∏ô‡∏î‡∏¥‡∏ô‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÄ‡∏Å‡πã ‡πÉ‡∏Å‡∏•‡πâ‡∏õ‡πà‡∏≤‡πÄ‡∏Ç‡∏≤‡πÉ‡∏´‡∏ç‡πà", "lat": 14.051, "lng": 101.381, "category": "‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà"},
    {"name": "DR Dimsum", "desc": "‡∏£‡πâ‡∏≤‡∏ô‡∏ï‡∏¥‡πà‡∏°‡∏ã‡∏≥‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡πÉ‡∏ô‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ ‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡πÄ‡∏î‡πá‡∏î", "lat": 14.052, "lng": 101.382, "category": "‡∏ï‡∏¥‡πà‡∏°‡∏ã‡∏≥"},
    {"name": "Bloom Restaurant @ Siamdasada", "desc": "‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ü‡∏¥‡∏ß‡∏ä‡∏±‡πà‡∏ô‡πÉ‡∏ô‡∏£‡∏µ‡∏™‡∏≠‡∏£‡πå‡∏ï‡∏´‡∏£‡∏π ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏î‡∏µ", "lat": 14.053, "lng": 101.383, "category": "‡∏ü‡∏¥‡∏ß‡∏ä‡∏±‡πà‡∏ô"},
    {"name": "Nunou Caf√©", "desc": "‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà‡∏™‡∏≤‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ ‡∏ó‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏Ç‡∏≤‡πÉ‡∏´‡∏ç‡πà‡∏ù‡∏±‡πà‡∏á‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ", "lat": 14.054, "lng": 101.384, "category": "‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà"},
    {"name": "BAN PUNN Steak Cafe Bar", "desc": "‡∏£‡πâ‡∏≤‡∏ô‡∏™‡πÄ‡∏ï‡πä‡∏Å‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏î‡∏µ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏°‡∏∑‡πâ‡∏≠‡πÄ‡∏¢‡πá‡∏ô", "lat": 14.055, "lng": 101.385, "category": "‡∏™‡πÄ‡∏ï‡πä‡∏Å"},
    {"name": "Happy Bew", "desc": "‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏ö‡πÄ‡∏Å‡∏≠‡∏£‡∏µ‡πà‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å ‡∏°‡∏µ‡πÄ‡∏Ñ‡πâ‡∏Å‡πÅ‡∏•‡∏∞‡∏Ç‡∏ô‡∏°‡πÇ‡∏Æ‡∏°‡πÄ‡∏°‡∏î", "lat": 14.056, "lng": 101.386, "category": "‡πÄ‡∏ö‡πÄ‡∏Å‡∏≠‡∏£‡∏µ‡πà"},
    {"name": "‡∏ï‡∏µ‡∏ô‡πÄ‡∏Ç‡∏≤ Food & Camping", "desc": "‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ô‡∏ß‡πÅ‡∏Ñ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á ‡πÉ‡∏Å‡∏•‡πâ‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥", "lat": 14.057, "lng": 101.387, "category": "‡πÅ‡∏Ñ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á"},
    {"name": "‡∏õ‡∏±‡πà‡∏ô‡πÉ‡∏ô‡∏õ‡πà‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà", "desc": "‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÅ‡∏ô‡∏ß‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏£‡πà‡∏°‡∏£‡∏∑‡πà‡∏ô", "lat": 14.058, "lng": 101.388, "category": "‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ"},
    {"name": "‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡πÑ‡∏Å‡πà ‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà ‡πÄ‡∏ö‡∏ï‡∏á", "desc": "‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ ‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß ‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà", "lat": 14.059, "lng": 101.389, "category": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß"},
    {"name": "‡∏™‡∏ß‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏ô‡∏¥‡∏ô‡∏ô‡πâ‡∏≥", "desc": "‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏¥‡∏°‡∏ô‡πâ‡∏≥‡∏ß‡∏¥‡∏ß‡∏™‡∏ß‡∏¢ ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏î‡πá‡∏î‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏∏‡πâ‡∏á‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥‡πÄ‡∏ú‡∏≤", "lat": 14.060, "lng": 101.390, "category": "‡∏ã‡∏µ‡∏ü‡∏π‡πâ‡∏î"},
]

# ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏á
search = st.text_input("üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠")
category = st.selectbox("üçΩÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£", ["‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"] + sorted(set(r["category"] for r in restaurants)))

filtered = [r for r in restaurants if search.lower() in r["name"].lower()]
if category != "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":
    filtered = [r for r in filtered if r["category"] == category]

# ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
st.sidebar.header("üì∏ ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£")
uploaded_image = st.sidebar.file_uploader("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û", type=["jpg", "png"])
if uploaded_image:
    st.sidebar.image(uploaded_image, caption="‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î", use_column_width=True)

# ‡πÅ‡∏™‡∏î‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£
for r in filtered:
    st.subheader(f"{r['name']}")
    st.write(r['desc'])
    map_url = f"https://maps.google.com/maps?q={r['lat']},{r['lng']}&hl=th&z=16&output=embed"
    st.markdown(f"<iframe src='{map_url}' width='100%' height='200'></iframe>", unsafe_allow_html=True)
    rating = st.slider(f"‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡πâ‡∏≤‡∏ô {r['name']}", 1, 5, 3)
    st.write(f"‚≠ê ‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: {rating}/5")
    comment = st.text_area(f"üí¨ ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô {r['name']}")
    if st.button(f"‡∏™‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏£‡πâ‡∏≤‡∏ô {r['name']}"):
        st.success(f"‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤: {comment}")
    st.markdown("---")

# ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå
st.header("üìù ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ")

with st.form("site_review_form"):
    site_rating = st.slider("‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ", 1, 5, 4)
    site_comment = st.text_area("‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå")
    submitted = st.form_submit_button("‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå")

if submitted:
    st.success("‚úÖ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå!")
    st.markdown(f"‚≠ê ‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ: **{site_rating}/5**")
    st.markdown(f"üí¨ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: _{site_comment}_")
