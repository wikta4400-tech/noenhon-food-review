import streamlit as st

st.set_page_config(page_title="‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏°", layout="wide")
st.title("üçΩÔ∏è ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ñ‡∏ß‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏°")

restaurants = [
    {"name": "‡∏Ñ‡∏£‡∏±‡∏ß‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏°", "desc": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏£‡∏™‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏ô", "lat": 14.048, "lng": 101.378, "category": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢"},
    {"name": "‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡πÄ‡∏£‡∏∑‡∏≠‡πÄ‡∏à‡πä‡πÅ‡∏î‡∏á", "desc": "‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô", "lat": 14.049, "lng": 101.379, "category": "‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß"},
    {"name": "‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà‡∏ï‡∏µ‡πã‡∏ô‡πâ‡∏≠‡∏¢", "desc": "‡πÑ‡∏Å‡πà‡∏ô‡∏∏‡πà‡∏° ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡πÄ‡∏î‡πá‡∏î", "lat": 14.047, "lng": 101.377, "category": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß"},
    {"name": "‡∏ï‡∏≥‡πÅ‡∏ã‡πà‡∏ö‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏°", "desc": "‡∏™‡πâ‡∏°‡∏ï‡∏≥‡∏£‡∏™‡∏à‡∏±‡∏î", "lat": 14.046, "lng": 101.376, "category": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏µ‡∏™‡∏≤‡∏ô"},
    {"name": "‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡πÅ‡∏ü‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏°‡πâ", "desc": "‡∏Å‡∏≤‡πÅ‡∏ü‡∏™‡∏î ‡∏Ç‡∏ô‡∏°‡πÇ‡∏Æ‡∏°‡πÄ‡∏°‡∏î", "lat": 14.045, "lng": 101.375, "category": "‡∏Å‡∏≤‡πÅ‡∏ü"},
    {"name": "‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡∏£‡∏¥‡∏°‡∏ó‡∏≤‡∏á", "desc": "‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡∏£‡πâ‡∏≠‡∏ô‡πÜ", "lat": 14.044, "lng": 101.374, "category": "‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏∞‡∏ó‡∏∞"},
    {"name": "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ï‡πâ‡∏°‡πÇ‡∏ï‡πâ‡∏£‡∏∏‡πà‡∏á", "desc": "‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡∏∂‡∏Å ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢", "lat": 14.043, "lng": 101.373, "category": "‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡∏∂‡∏Å"},
    {"name": "‡∏ä‡∏≤‡∏ö‡∏π‡∏ä‡∏¥‡πÄ‡∏ô‡∏¥‡∏ô‡∏´‡∏≠‡∏°", "desc": "‡∏ä‡∏≤‡∏ö‡∏π‡∏ö‡∏∏‡∏ü‡πÄ‡∏ü‡πà‡∏ï‡πå", "lat": 14.042, "lng": 101.372, "category": "‡∏ä‡∏≤‡∏ö‡∏π"},
    {"name": "‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡πä‡∏≠‡πâ‡∏≠‡∏¢‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á", "desc": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏±‡∏ô‡πÉ‡∏à", "lat": 14.041, "lng": 101.371, "category": "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á"},
    {"name": "‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏≤‡∏¢", "desc": "‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô", "lat": 14.040, "lng": 101.370, "category": "‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ô"},
]

search = st.text_input("üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠")
category = st.selectbox("üçΩÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£", ["‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"] + sorted(set(r["category"] for r in restaurants)))

filtered = [r for r in restaurants if search.lower() in r["name"].lower()]
if category != "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":
    filtered = [r for r in filtered if r["category"] == category]

st.sidebar.header("üì∏ ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£")
uploaded_image = st.sidebar.file_uploader("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û", type=["jpg", "png"])
if uploaded_image:
    st.sidebar.image(uploaded_image, caption="‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î", use_column_width=True)

for r in filtered:
    st.subheader(f"{r['name']}")
    st.write(r['desc'])
    map_url = f"https://maps.google.com/maps?q={r['lat']},{r['lng']}&hl=th&z=16&output=embed"
    st.markdown(f"<iframe src='{map_url}' width='100%' height='200'></iframe>", unsafe_allow_html=True)
    rating = st.slider(f"‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡πâ‡∏≤‡∏ô {r['name']}", 1, 5, 3)
    st.write(f"‚≠ê ‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: {rating}/5")
    st.markdown("---")

st.header("üí¨ ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô")
comment = st.text_area("‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà")
if st.button("‡∏™‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô"):
    st.success(f"‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤: {comment}")
